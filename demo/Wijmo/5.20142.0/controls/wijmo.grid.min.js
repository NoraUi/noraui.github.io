/*
    *
    * Wijmo Library 5.20142.10
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    * 
    * Licensed under the Wijmo Commercial License. 
    * sales@wijmo.com
    * http://wijmo.com/widgets/license/
    *
    */
var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},wijmo;wijmo.culture.FlexGrid={groupHeaderFormat:"{name}: <b>{value} <\/b>({count} items)"},function(n){(function(t){"use strict";(function(n){n[n.None=0]="None";n[n.Column=1]="Column";n[n.Row=2]="Row";n[n.All=3]="All"})(t.HeadersVisibility||(t.HeadersVisibility={}));var i=t.HeadersVisibility,r=function(r){function u(i,u){r.call(this,i,null,!0);this._szClient=new n.Size(0,0);this._ptScrl=new n.Point(0,0);this._rtl=!1;this._autoGenCols=!0;this._readOnly=!1;this._indent=14;this._allowResizing=1;this._allowDragging=1;this._hdrVis=3;this._alSorting=!0;this._alAddNew=!1;this._alDelete=!1;this._alMerging=0;this._shSort=!0;this._shGroups=!0;this.itemsSourceChanged=new n.Event;this.scrollPositionChanged=new n.Event;this.selectionChanging=new n.Event;this.selectionChanged=new n.Event;this.loadingRows=new n.Event;this.loadedRows=new n.Event;this.resizingColumn=new n.Event;this.resizedColumn=new n.Event;this.draggingColumn=new n.Event;this.draggedColumn=new n.Event;this.resizingRow=new n.Event;this.resizedRow=new n.Event;this.draggingRow=new n.Event;this.draggedRow=new n.Event;this.groupCollapsedChanging=new n.Event;this.groupCollapsedChanged=new n.Event;this.sortingColumn=new n.Event;this.sortedColumn=new n.Event;this.beginningEdit=new n.Event;this.prepareCellForEdit=new n.Event;this.cellEditEnding=new n.Event;this.cellEditEnded=new n.Event;this.rowEditEnding=new n.Event;this.rowEditEnded=new n.Event;this.rowAdded=new n.Event;this.deletingRow=new n.Event;var o=i,f=this,e=parseInt($(o).css("fontSize"))*2;this.deferUpdate(function(){f._rows=new t.RowCollection(f,e);f._cols=new t.ColumnCollection(f,e*4);f._hdrRows=new t.RowCollection(f,e);f._hdrCols=new t.ColumnCollection(f,Math.round(e*1.25));f._hdrRows.push(new t.Row);f._hdrCols.push(new t.Column);f._hdrCols[0].align="center";f._createChildren();f._cf=new t.CellFactory;f._keyHdl=new t._KeyboardHandler(f);f._mouseHdl=new t._MouseHandler(f);f._edtHdl=new t._EditHandler(f);f._selHdl=new t._SelectionHandler(f);f._addHdl=new t._AddNewHandler(f);f._mrgMgr=new t.MergeManager(f);u&&f.initialize(u)});this._root.addEventListener("scroll",function(){f._ptScrl=new n.Point(-f._root.scrollLeft,-f._root.scrollTop);f.onScrollPositionChanged();f._updateContent(!0)})}return __extends(u,r),Object.defineProperty(u.prototype,"headersVisibility",{get:function(){return this._hdrVis},set:function(t){t!=this._hdrVis&&(this._hdrVis=n.asEnum(t,i),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"autoGenerateColumns",{get:function(){return this._autoGenCols},set:function(t){this._autoGenCols=n.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"columnLayout",{get:function(){for(var c,o,i,r,f,s=u._getSerializableProperties(t.Column),l=new n.grid.Column,h=[],e=0;e<this.columns.length;e++){for(c=this.columns[e],o={},i=0;i<s.length;i++)r=s[i],f=c[r],f!=l[r]&&n.isPrimitive(f)&&(o[r]=f);h.push(o)}return JSON.stringify({columns:h})},set:function(t){var i=JSON.parse(n.asString(t));if(!i||i.columns==null)throw"Invalid columnLayout data.";this.columns.clear();this.initialize(i)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=n.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allowResizing",{get:function(){return this._allowResizing},set:function(i){this._allowResizing=n.asEnum(i,t.AllowResizing)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allowSorting",{get:function(){return this._alSorting},set:function(t){this._alSorting=n.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allowAddNew",{get:function(){return this._alAddNew},set:function(t){t!=this._alAddNew&&(this._alAddNew=n.asBoolean(t),this._addHdl.updateNewRowTemplate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allowDelete",{get:function(){return this._alDelete},set:function(t){t!=this._alDelete&&(this._alDelete=n.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allowMerging",{get:function(){return this._alMerging},set:function(i){i!=this._alMerging&&(this._alMerging=n.asEnum(i,t.AllowMerging),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showSort",{get:function(){return this._shSort},set:function(t){t!=this._shSort&&(this._shSort=n.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showGroups",{get:function(){return this._shGroups},set:function(t){t!=this._shGroups&&(this._shGroups=n.asBoolean(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"groupHeaderFormat",{get:function(){return this._gHdrFmt},set:function(t){t!=this._gHdrFmt&&(this._gHdrFmt=n.asString(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allowDragging",{get:function(){return this._allowDragging},set:function(i){i!=this._allowDragging&&(this._allowDragging=n.asEnum(i,t.AllowDragging),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=n.asCollectionView(t),this._lastCount=0,this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._bindGrid(!0),this.onItemsSourceChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(n){n!=this._childItemsPath&&(this._childItemsPath=n,this._bindGrid(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"cells",{get:function(){return this._gpCells},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"columnHeaders",{get:function(){return this._gpCHdr},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rowHeaders",{get:function(){return this._gpRHdr},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"topLeftCells",{get:function(){return this._gpTL},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"scrollPosition",{get:function(){return this._ptScrl.clone()},set:function(n){this._root.scrollLeft=-n.x;this._root.scrollTop=-n.y},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"clientSize",{get:function(){return this._szClient},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"controlRect",{get:function(){if(!this._rcBounds){var t=this._root.getBoundingClientRect();this._rcBounds=new n.Rect(t.left+window.pageXOffset,t.top+window.pageYOffset,t.width,t.height)}return this._rcBounds},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"scrollSize",{get:function(){return new n.Size(this._gpCells.width,this._heightBrowser)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"viewRange",{get:function(){return this._gpCells.viewRange},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"cellFactory",{get:function(){return this._cf},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=n.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),u.prototype.getCellData=function(n,t,i){return this.cells.getCellData(n,t,i)},u.prototype.setCellData=function(n,t,i,r){return typeof r=="undefined"&&(r=!0),this.cells.setCellData(n,t,i,r)},u.prototype.hitTest=function(i,r){return n.isNumber(i)&&n.isNumber(r)?i=new n.Point(i,r):i instanceof MouseEvent&&(i=new n.Point(i.pageX,i.pageY)),n.asType(i,n.Point),new t.HitTestInfo(this,i)},u.prototype.refresh=function(n){typeof n=="undefined"&&(n=!0);r.prototype.refresh.call(this,n);n&&this._updateColumnTypes();this.refreshCells(n)},u.prototype.refreshCells=function(n,t,i){typeof t=="undefined"&&(t=!1);this.isUpdating||(n?this._updateLayout():this._updateContent(t,i))},u.prototype.autoSizeColumn=function(n,t,i){typeof t=="undefined"&&(t=!1);typeof i=="undefined"&&(i=4);this.autoSizeColumns(n,n,t,i)},u.prototype.autoSizeColumns=function(t,i,r,u){typeof r=="undefined"&&(r=!1);typeof u=="undefined"&&(u=4);t=t==null?0:n.asInt(t);i=i==null?this.columns.length-1:n.asInt(t);n.asBoolean(r);n.asNumber(u);var f=this,e=0,s=r?this.topLeftCells:this.columnHeaders,o=r?this.rowHeaders:this.cells,h=this.viewRange,c,l;i>this.columns.length-1&&(i=o.columns.length-1);h.row=Math.max(0,h.row-1e3);h.row2=Math.min(h.row2+1e3,this.rows.length-1);this.deferUpdate(function(){for(var a,n=$("<span/>").appendTo(f.hostElement).css({visibility:"hidden"})[0],v=t;v<=i;v++){for(e=0,a=0;a<s.rows.length;a++)s.rows[a].isVisible&&(f.cellFactory.updateCell(s,a,v,n),f.itemFormatter&&f.itemFormatter(s,a,v,n),n.style.width=null,e=Math.max(e,n.offsetWidth));for(f.cellFactory.updateCell(o,0,v,n),n.style.width=null,l=null,a=h.row;a<=h.row2;a++)o.rows[a].isVisible&&(!r&&v==o.columns.firstVisibleIndex&&o.rows.maxGroupLevel>-1?(f.cellFactory.updateCell(o,a,v,n),f.itemFormatter&&f.itemFormatter(s,a,v,n),n.style.width=null,e=Math.max(e,n.offsetWidth)):(c=o.getCellData(a,v,!0),c!=l&&(l=c,n.textContent=c,f.itemFormatter&&f.itemFormatter(s,a,v,n),e=Math.max(e,n.offsetWidth))));o.columns[v].width=e+u+2}f.hostElement.removeChild(n)})},u.prototype.autoSizeRow=function(n,t,i){typeof t=="undefined"&&(t=!1);typeof i=="undefined"&&(i=0);this.autoSizeRows(n,n,t,i)},u.prototype.autoSizeRows=function(t,i,r,u){typeof r=="undefined"&&(r=!1);typeof u=="undefined"&&(u=0);t=t==null?0:n.asInt(t);i=i==null?this.rows.length-1:n.asInt(i);n.asBoolean(r);n.asNumber(u);var f=this,e=0,s=r?this.topLeftCells:this.rowHeaders,o=r?this.columnHeaders:this.cells;this.deferUpdate(function(){for(var r,c,n=$("<div/>").appendTo(f.hostElement).css({visibility:"hidden"})[0],h=t;h<=i;h++){for(e=0,f.cellFactory.updateCell(s,h,0,n),n.style.height=null,r=0;r<s.columns.length;r++)c=s.columns[r].renderSize,c>0&&(n.style.width=c+"px",n.textContent=s.getCellData(h,r,!0),f.itemFormatter&&f.itemFormatter(s,h,r,n),e=Math.max(e,n.offsetHeight));for(f.cellFactory.updateCell(o,h,0,n),n.style.height=null,r=0;r<o.columns.length;r++)c=o.columns[r].renderSize,c>0&&(n.style.width=c+"px",n.textContent=o.getCellData(h,r,!0),f.itemFormatter&&f.itemFormatter(o,h,r,n),e=Math.max(e,n.offsetHeight));o.rows[h].height=e+u}f.hostElement.removeChild(n)})},Object.defineProperty(u.prototype,"treeIndent",{get:function(){return this._indent},set:function(t){t!=this._indent&&(this._indent=n.asNumber(t,!1,!0),this.columns.onCollectionChanged())},enumerable:!0,configurable:!0}),u.prototype.collapseGroupsToLevel=function(t){if(1){var i=this;i.deferUpdate(function(){for(var u,r=0;r<i.rows.length;r++)u=n.tryCast(i.rows[r],n.grid.GroupRow),u&&(u.isCollapsed=u.level>=t)})}},Object.defineProperty(u.prototype,"selectionMode",{get:function(){return this._selHdl.selectionMode},set:function(i){i!=this.selectionMode&&(this._selHdl.selectionMode=n.asEnum(i,t.SelectionMode),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"selection",{get:function(){return this._selHdl.selection.clone()},set:function(n){this._selHdl.selection=n},enumerable:!0,configurable:!0}),u.prototype.select=function(i,r){typeof r=="undefined"&&(r=!0);n.isInt(i)&&n.isInt(r)&&(i=new n.grid.CellRange(i,r),r=!0);i=n.asType(i,t.CellRange);this._selHdl.select(i,r)},u.prototype.getSelectedState=function(t,i){return this._selHdl.getSelectedState(n.asInt(t),n.asInt(i))},u.prototype.scrollIntoView=function(t,i){var r=this.scrollPosition,s=this._szClient.width,e=this._szClient.height,u;if(t=n.asInt(t),t>-1&&t<this._rows.length){var f=this._rows[t],h=f.pos/(this.cells.height-e),c=Math.round(this._maxOffsetY*h),o=f.pos-c;o<-r.y?r.y=-o:f.pos+f.renderSize>-r.y+e&&(r.y=Math.max(-o,e-(f.pos+f.renderSize)))}return(i=n.asInt(i),i>-1&&i<this._cols.length&&(u=this._cols[i],u.pos<-r.x?r.x=-u.pos:u.pos+u.renderSize>-r.x+s&&(r.x=Math.max(-u.pos,s-(u.pos+u.renderSize)))),!r.equals(this.scrollPosition))?(this.scrollPosition=r,!0):!1},u.prototype.isRangeValid=function(n){return n.isValid&&n.bottomRow<this.rows.length&&n.rightCol<this.columns.length},u.prototype.startEditing=function(n,t,i){return typeof n=="undefined"&&(n=!0),this._edtHdl.startEditing(n,t,i)},u.prototype.finishEditing=function(n){return typeof n=="undefined"&&(n=!1),this._edtHdl.finishEditing(n)},Object.defineProperty(u.prototype,"activeEditor",{get:function(){return this._edtHdl.activeEditor},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"editRange",{get:function(){return this._edtHdl.editRange},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"mergeManager",{get:function(){return this._mrgMgr},set:function(t){t!=this._mrgMgr&&(this._mrgMgr=n.asType(t,"IMergeManager",!0),this.invalidate())},enumerable:!0,configurable:!0}),u.prototype.getMergedRange=function(n,t,i){return this._mrgMgr?this._mrgMgr.getMergedRange(n,t,i):null},u.prototype.onItemsSourceChanged=function(){this.itemsSourceChanged.raise(this)},u.prototype.onScrollPositionChanged=function(){this.scrollPositionChanged.raise(this)},u.prototype.onSelectionChanging=function(n){return this.selectionChanging.raise(this,n),!n.cancel},u.prototype.onSelectionChanged=function(n){return this.selectionChanged.raise(this,n),!n.cancel},u.prototype.onLoadingRows=function(n){this.loadingRows.raise(this,n)},u.prototype.onLoadedRows=function(n){this.loadedRows.raise(this,n)},u.prototype.onResizingColumn=function(n){return this.resizingColumn.raise(this,n),!n.cancel},u.prototype.onResizedColumn=function(n){this.resizedColumn.raise(this,n)},u.prototype.onDraggingColumn=function(n){return this.draggingColumn.raise(this,n),!n.cancel},u.prototype.onDraggedColumn=function(n){this.draggedColumn.raise(this,n)},u.prototype.onResizingRow=function(n){return this.resizingRow.raise(this,n),!n.cancel},u.prototype.onResizedRow=function(n){this.resizedRow.raise(this,n)},u.prototype.onDraggingRow=function(n){return this.draggingRow.raise(this,n),!n.cancel},u.prototype.onDraggedRow=function(n){this.draggedRow.raise(this,n)},u.prototype.onGroupCollapsedChanging=function(n){return this.groupCollapsedChanging.raise(this,n),!n.cancel},u.prototype.onGroupCollapsedChanged=function(n){this.groupCollapsedChanged.raise(this,n)},u.prototype.onSortingColumn=function(n){return this.sortingColumn.raise(this,n),!n.cancel},u.prototype.onSortedColumn=function(n){this.sortedColumn.raise(this,n)},u.prototype.onBeginningEdit=function(n){return this.beginningEdit.raise(this,n),!n.cancel},u.prototype.onPrepareCellForEdit=function(n){this.prepareCellForEdit.raise(this,n)},u.prototype.onCellEditEnding=function(n){return this.cellEditEnding.raise(this,n),!n.cancel},u.prototype.onCellEditEnded=function(n){this.cellEditEnded.raise(this,n)},u.prototype.onRowEditEnding=function(n){this.rowEditEnding.raise(this,n)},u.prototype.onRowEditEnded=function(n){this.rowEditEnded.raise(this,n)},u.prototype.onRowAdded=function(n){this.rowAdded.raise(this,n)},u.prototype.onDeletingRow=function(n){this.deletingRow.raise(this,n)},u.prototype._bindGrid=function(t){var i=this,r;i.deferUpdate(function(){var u,f,e,n;if(i._lastCount==0&&i._cv&&i._cv.items&&i._cv.items.length&&(t=!0),u=[],i.selectionMode==5)for(n=0;n<i.rows.length;n++)f=i.rows[n],f.isSelected&&f.dataItem&&u.push(f.dataItem);if(i.rows.deferUpdate(function(){i._bindRows()}),t&&i.columns.deferUpdate(function(){i._bindColumns()}),e=0,u.length)for(n=0;n<i.rows.length&&e<u.length;n++)u.indexOf(i.rows[n].dataItem)>-1&&(i.rows[n].isSelected=!0,e++);if(i.selectionMode==5&&e==0)for(r=i.selection,n=r.topRow;n<=r.bottomRow&&n>-1;n++)i.rows[n].isSelected=!0;!i._lastCount&&i._cv&&i._cv.items&&(i._lastCount=i._cv.items.length)});i.collectionView&&i._cvCurrentChanged(i.collectionView,n.EventArgs.empty)},u.prototype._cvCollectionChanged=function(i,r){var u;if(this.autoGenerateColumns&&this.columns.length==0)this._bindGrid(!0);else{switch(r.action){case 2:this.invalidate();return;case 0:if(r.index==this.collectionView.items.length-1){u=this.rows.length;this.rows[u-1]instanceof t._NewRowTemplate&&u--;this.rows.insert(u,new t.Row(r.item));return}n.assert(!1,"added item should be the last one.");break;case 1:if(u=this._findRow(r.item),u>-1){this.rows.removeAt(u);this._cvCurrentChanged(i,r);return}n.assert(!1,"removed item not found in grid.")}this._bindGrid(!1)}},u.prototype._cvCurrentChanged=function(){if(this.collectionView){var n=this.selection,t=this._getRowIndex(this.collectionView.currentPosition);n.row!=t&&(n.row=n.row2=t,this.select(n))}},u.prototype._getRowIndex=function(t){var i,t;if(this.collectionView){if(t>-1){for(i=this.collectionView.items[t];t<this.rows.length;t++)if(this.rows[t].dataItem===i)return t;return-1}return t=this.selection.row,t>-1&&this.rows[t]instanceof n.grid.GroupRow?t:-1}return this.selection.row},u.prototype._getCvIndex=function(n){if(n>-1&&this.collectionView){var t=this.rows[n].dataItem;for(n=Math.min(n,this.collectionView.items.length);n>-1;n--)if(this.collectionView.items[n]===t)return n}return-1},u.prototype._findRow=function(n){for(var t=0;t<this.rows.length;t++)if(this.rows[t].dataItem==n)return t;return-1},u.prototype._createChildren=function(){var n=$(this.getTemplate()).appendTo(this.hostElement);this.applyTemplate("wj-control wj-flexgrid wj-content",n,{_root:"root",_eSz:"sz",_eCt:"cells",_eTL:"tl",_eCHdr:"ch",_eRHdr:"rh",_eTLCt:"tlcells",_eCHdrCt:"chcells",_eRHdrCt:"rhcells"});this._gpCells=new t.GridPanel(this,1,this._rows,this._cols,this._eCt);this._gpCHdr=new t.GridPanel(this,2,this._hdrRows,this._cols,this._eCHdrCt);this._gpRHdr=new t.GridPanel(this,3,this._rows,this._hdrCols,this._eRHdrCt);this._gpTL=new t.GridPanel(this,4,this._hdrRows,this._hdrCols,this._eTLCt)},u.prototype._updateLayout=function(){var f=this._rows.getTotalSize(),t=this._hdrVis&2?this._hdrCols.getTotalSize():0,i=this._hdrVis&1?this._hdrRows.getTotalSize():0,e=$(this._eCHdr),o=$(this._eRHdr),r;this._rtl=getComputedStyle(this.hostElement).direction=="rtl";this._heightBrowser=Math.min(f,u._getMaxSupportedCssHeight());this._maxOffsetY=Math.max(0,f-this._heightBrowser);this._rtl?($(this._eTL).css({right:0,top:0,width:t,height:i}),e.css({top:0,right:t,height:i}),o.css({right:0,top:i,width:t}),$(this._eCt).css({right:t,top:i,width:this._gpCells.width,height:this._heightBrowser})):($(this._eTL).css({left:0,top:0,width:t,height:i}),e.css({top:0,left:t,height:i}),o.css({left:0,top:i,width:t}),$(this._eCt).css({left:t,top:i,width:this._gpCells.width,height:this._heightBrowser}));r=this._eSz.style;r.width=t+this._gpCells.width+"px";r.height=i+this._heightBrowser+"px";this.columns._updateStarSizes(this._root.clientWidth-t)&&(this._eCt.style.width=this._gpCells.width+"px");this._szClient=new n.Size(this._root.clientWidth-t,this._root.clientHeight-i);this._rcBounds=null;this._updateContent(!1);this._szClient=new n.Size(this._root.clientWidth-t,this._root.clientHeight-i);this._eCHdr.style.width=this._szClient.width+"px";this._eRHdr.style.height=this._szClient.height+"px"},u.prototype._updateContent=function(n,t){var i=1;this._heightBrowser>this._szClient.height&&(i=-this._ptScrl.y/(this._heightBrowser-this._szClient.height));this._offsetY=Math.round(this._maxOffsetY*i);t?this._gpCells._updateContent(n,this._offsetY,t):(this._gpCells._updateContent(n,this._offsetY),this._gpCHdr._updateContent(n,0),this._gpRHdr._updateContent(n,this._offsetY),this._gpTL._updateContent(n,0));this._rcBounds=null},u.prototype._bindColumns=function(){for(var i,r,f,e,o,u=0;u<this.columns.length;u++)i=this.columns[u],i._getFlag(32)&&(this.columns.removeAt(u),u--);if(r=null,f=this.collectionView,f&&f.sourceCollection&&f.sourceCollection.length&&(r=f.sourceCollection[0]),r&&this.autoGenerateColumns)for(e in r)n.isPrimitive(r[e])&&(i=new t.Column,i._setFlag(32,!0),i.binding=i.name=e,i.dataType=n.getType(r[e]),o=Object.getOwnPropertyDescriptor(r,e),o&&!o.writable&&i._setFlag(512,!0),i.dataType==2&&(i.width=80),this.columns.push(i));r&&this._updateColumnTypes()},u.prototype._updateColumnTypes=function(){var i=this.collectionView,u,t,r;if(i&&i.items&&i.items.length)for(u=i.items[0],r=0;r<this.columns.length;r++)t=this.columns[r],t.dataType==null&&t.binding&&(t.dataType=n.getType(u[t.binding]))},u.prototype._bindRows=function(){var f=new n.CancelEventArgs,r,u,i,e;this.onLoadingRows(f);if(!f.cancel){if(this.rows.clear(),this.collectionView&&this.collectionView.items)if(r=this.collectionView.items,u=this.collectionView.groups,this.childItemsPath)for(i=0;i<r.length;i++)this._addTreeNode(r[i],0);else if(u!=null&&u.length>0&&this.showGroups)for(i=0;i<u.length;i++)this._addGroup(u[i]);else for(i=0;i<r.length;i++)e=new t.Row(r[i]),this.rows.push(e);this.onLoadedRows(f)}},u.prototype._addGroup=function(n){var r=new t.GroupRow,u,i;if(r.level=n.level,r.dataItem=n,this.rows.push(r),n.isBottomLevel)for(i=0;i<n.items.length;i++)u=new t.Row(n.items[i]),this.rows.push(u);else for(i=0;i<n.groups.length;i++)this._addGroup(n.groups[i])},u.prototype._addTreeNode=function(t,i){var u=new n.grid.GroupRow,f=t[this.childItemsPath],r;if(u.dataItem=t,u.level=i,this.rows.push(u),f)for(r=0;r<f.length;r++)this._addTreeNode(f[r],i+1)},u._getMaxSupportedCssHeight=function(){if(!u._maxCssHeight){for(var t=1e6,n=0,i=$('<div style="display:none"/>').appendTo(document.body);;){if(n=t+5e5,i.height(n),n>6e9||i.height()!==n)break;t=n}i.remove();u._maxCssHeight=t}return u._maxCssHeight},u.prototype._copy=function(i,r){var f,u,e;if(i=="columns"){for(f=n.asArray(r),u=0;u<f.length;u++)e=new t.Column,n.copy(e,f[u]),this.columns.push(e);return!0}return!1},u._getSerializableProperties=function(n){var f=[],u,t,i,r;for(n=n.prototype;n!==null;n=n.__proto__)for(u=Object.getOwnPropertyNames(n),t=0;t<u.length;t++)i=u[t],r=Object.getOwnPropertyDescriptor(n,i),r&&r.set&&r.get&&i[0]!="_"&&f.push(i);return f},u.controlTemplate='<div style="position:relative;width:100%;height:100%;max-height:inherit;overflow:hidden"><div wj-part="root" style="position:absolute;width:100%;height:100%;max-height:inherit;overflow:auto;-webkit-overflow-scrolling:touch;" ><div wj-part="cells" style ="position:relative"/><\/div><div wj-part="tl" style="position:absolute;overflow:hidden"><div wj-part="tlcells" class="wj-topleft" style="position:relative"/><\/div><div wj-part="ch" style="position:absolute;overflow:hidden"><div wj-part="chcells" class="wj-colheaders" style="position:relative"/><\/div><div wj-part="rh" style="position:absolute;overflow:hidden"><div wj-part="rhcells" class="wj-rowheaders" style="position:relative"/><\/div><div wj-part="sz" style="position:relative;visibility:hidden;"/><\/div>',u}(n.Control);t.FlexGrid=r})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){(function(t){"use strict";var i=function(i){function r(r,u){i.call(this);this._panel=n.asType(r,t.GridPanel);this._rng=n.asType(u,t.CellRange)}return __extends(r,i),Object.defineProperty(r.prototype,"panel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cellRange",{get:function(){return this._rng.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"row",{get:function(){return this._rng.row},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"col",{get:function(){return this._rng.col},enumerable:!0,configurable:!0}),r}(n.CancelEventArgs);t.CellRangeEventArgs=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";(function(n){n[n.None=0]="None";n[n.Cell=1]="Cell";n[n.ColumnHeader=2]="ColumnHeader";n[n.RowHeader=3]="RowHeader";n[n.TopLeft=4]="TopLeft"})(t.CellType||(t.CellType={}));var r=t.CellType,i=function(){function i(t,i,r,u,f){this._offsetY=0;this._g=n.asType(t,n.grid.FlexGrid);this._ct=n.asInt(i);this._rows=n.asType(r,n.grid.RowCollection);this._cols=n.asType(u,n.grid.ColumnCollection);this._e=n.asType(f,HTMLElement);this._rng=new n.grid.CellRange}return Object.defineProperty(i.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellType",{get:function(){return this._ct},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewRange",{get:function(){return this._getViewRange(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._cols.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._rows.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),i.prototype.getCellData=function(t,i,r){var u=this._cols[i],e=this._rows[t],f=null,o;if(e.dataItem&&u.binding?f=u._binding.getValue(e.dataItem):e._ubv&&(f=e._ubv[u._hash]),f==null)switch(this._ct){case 2:t==this._rows.length-1&&u.header&&(f=u.header);break;case 1:u.aggregate!=0&&e instanceof n.grid.GroupRow&&(o=n.tryCast(e.dataItem,n.collections.CollectionViewGroup),o&&(f=o.getAggregate(u.aggregate,u.binding)))}return r&&(f=this.cellType==1&&u.dataMap?u.dataMap.getDisplayValue(f):n.Globalize.format(f,u.format),f==null&&(f="")),f},i.prototype.setCellData=function(t,i,r,u){var e,f,o,s;if(typeof u=="undefined"&&(u=!0),e=this._rows[n.asNumber(t,!1,!0)],n.isString(i)&&(i=this._cols.indexOf(i),i<0))throw"Invalid column name or binding.";return(f=this._cols[n.asNumber(i,!1,!0)],this._ct==1&&(f.dataMap&&r!=null&&(r=f.dataMap.getKeyValue(r)),o=0,f.dataType?o=f.dataType:(s=this.getCellData(t,i,!1),o=n.getType(s)),u&&(r=n.changeType(r,o,f.format),o!=0&&n.getType(r)!=o)))?!1:(e.dataItem&&f.binding?f._binding.setValue(e.dataItem,r):(e._ubv||(e._ubv={}),e._ubv[f._hash]=r),!0)},Object.defineProperty(i.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),i.prototype._getOffsetY=function(){return this._offsetY},i.prototype._updateContent=function(i,r,u){var f,o,y,e,c=this._g,p=this._e.style,b=this._rows,d=this._cols,w=c.scrollPosition,g=c.containsFocus(),nt=n.isTouchDevice(),s,l,a,v,k,h;if((this._ct==2||this._ct==3)&&(this.cellType==2?c._rtl?p.right=w.x+"px":p.left=w.x+"px":this.cellType==3&&(p.top=w.y+"px")),this._offsetY!=r&&(i=!1,this._offsetY=r),i||(this._e.textContent="",u=null),s=this._getViewRange(nt),!i||u||!this._rng.contains(s)){for(s.equals(this._rng)||(u=null),this._rng=s,y=0,f=s.topRow;f<=s.bottomRow&&f>-1;f++)if(b[f].renderSize>0)for(o=s.leftCol;o<=s.rightCol&&o>-1;o++)if(d[o].renderSize>0){if(l=c.getMergedRange(this,f,o),l&&(f>s.topRow&&l.row<f||o>s.leftCol&&l.col<o))continue;if(e=this._e.childNodes[y++],u){for(a=!1,h=0;h<u.length&&!a;h++)a=l?u[h].intersects(l):u[h].contains(f,o);if(!a)continue;if(e){v=c.getSelectedState(f,o);k=b[f]instanceof t.GroupRow;n.toggleClass(e,"wj-state-selected",v==2);n.toggleClass(e,"wj-state-multi-selected",v==1);n.toggleClass(e,"wj-group",v==0&&k);continue}}e?e.style.display="":(e=document.createElement("div"),this._e.appendChild(e));c.cellFactory.updateCell(this,f,o,e,l)}for(h=y;h<this._e.childElementCount;h++)e=this._e.childNodes[h],e.style.display="none";g&&c.focus()}},i.prototype._getViewRange=function(t){var o=this._g,c=o.scrollPosition,s=this._rows,h=this._cols,i=new n.grid.CellRange(0,0,s.length-1,h.length-1),r,u,f,e;return(this._ct==1||this._ct==3)&&(r=-c.y+this._offsetY,u=o.clientSize.height+1,t&&(r-=u,u*=3),i.row=s.getItemAt(r),i.row2=s.getItemAt(r+u)),(this._ct==1||this._ct==2)&&(f=-c.x,e=o.clientSize.width+1,t&&(f-=e,e*=3),i.col=h.getItemAt(f),i.col2=h.getItemAt(f+e)),i},i}();t.GridPanel=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var i=function(){function i(){}return i.prototype.updateCell=function(i,r,u,f,e){var o=i.grid,v=i.cellType,h=f.style,l=i.rows[r],c=i.columns[u],p=n.tryCast(l,n.grid.GroupRow),s=i.getCellData(r,u,!0),nt=c.renderWidth,tt=l.renderHeight,a="wj-cell",b,k,d,g,y,w;if(e&&(r=e.row,u=e.col,l=i.rows[r],c=i.columns[u],p=n.tryCast(l,n.grid.GroupRow),s=i.getCellData(r,u,!0),b=e.getRenderSize(i),tt=b.height,nt=b.width),o._rtl?h.right=c.pos+"px":h.left=c.pos+"px",h.top=l.pos-i._getOffsetY()+"px",h.width=nt+"px",h.height=tt+"px",v==1){k=i.grid.getSelectedState(r,u);o.editRange&&o.editRange.contains(r,u)&&c.dataType!=3&&(k=0);switch(k){case 2:a+=" wj-state-selected";break;case 1:a+=" wj-state-multi-selected";break;case 0:p?a+=" wj-group":r%2!=0&&(a+=" wj-alt")}n.tryCast(l,t._NewRowTemplate)&&(a+=" wj-new")}else a+=" wj-header";if((c.wordWrap||l.wordWrap)&&(a+=" wj-wrap"),l.cssClass&&(a+=" "+l.cssClass),c.cssClass&&(a+=" "+c.cssClass),f.className=a,h.textAlign=c.getAlignment(),v==1&&(h.paddingLeft=h.paddingRight="",o.rows.maxGroupLevel>-1&&u==o.columns.firstVisibleIndex)){var rt=p?Math.max(0,p.level):o.rows.maxGroupLevel+1,ut=parseInt(getComputedStyle(f).paddingLeft),it=o.treeIndent*rt+ut+"px";o._rtl?h.paddingRight=it:h.paddingLeft=it}v==1&&u==o.columns.firstVisibleIndex&&p&&p.hasChildren?(s||(s=this._getGroupHeader(p)),f.innerHTML=this._getTreeIcon(p)+" "+s,h.textAlign=""):v==2&&r==o.columnHeaders.rows.length-1&&c.currentSort&&o.showSort?f.innerHTML=n.escapeHtml(s)+"&nbsp;"+this._getSortIcon(c):v!=3||u!=o.rowHeaders.columns.length-1||s?v==1&&c.dataType==3?(y=f.children?n.tryCast(f.children[0],HTMLInputElement):null,y&&y.type=="checkbox"||(f.innerHTML='<input type="checkbox"/>',y=n.tryCast(f.children[0],HTMLInputElement)),y.checked=s==!0?!0:!1,s==null&&(f.style.opacity=".5"),y.disabled=!o._edtHdl._allowEditing(r,u),y.disabled&&(y.style.cursor="default"),o.editRange&&o.editRange.contains(r,u)&&(o._edtHdl._edt=y)):v==1&&o.editRange&&o.editRange.isValid&&o.editRange.contains(r,u)?(f.innerHTML='<input type="text" class="wj-grid-editor wj-form-control">',w=f.children[0],w.value=s,w.style.textAlign=h.textAlign,h.padding="0px",o._edtHdl._edt=w):v==1&&(l.isContentHtml||c.isContentHtml)?f.innerHTML=s:f.textContent=s:(d=o.collectionView,g=d?d.currentEditItem:null,g&&l.dataItem==g?s="âœŽ":n.tryCast(l,t._NewRowTemplate)&&(s="*"),f.textContent=s);switch(v){case 3:f.draggable=(o.allowDragging&2)!=0;break;case 2:f.draggable=(o.allowDragging&1)!=0}o.itemFormatter&&o.itemFormatter(i,r,u,f)},i.prototype._getGroupHeader=function(t){var u=t.grid,o=u.groupHeaderFormat?u.groupHeaderFormat:n.culture.FlexGrid.groupHeaderFormat,r=n.tryCast(t.dataItem,n.collections.CollectionViewGroup);if(r&&o){var f=r.groupDescription.propertyName,e=r.name,i=u.columns.getColumn(f);return i&&i.header&&(f=i.header),i&&i.dataMap&&(e=i.dataMap.getDisplayValue(e)),n.format(o,{name:n.escapeHtml(f),value:n.escapeHtml(e),level:r.level,count:r.items.length})}return""},i.prototype._getTreeIcon=function(n){var t="wj-glyph-";return t+=n.grid._rtl?n.isCollapsed?"left":"down-left":n.isCollapsed?"right":"down-right","<span "+i._WJA_COLLAPSE+' class="'+t+'"><\/span>&nbsp;'},i.prototype._getSortIcon=function(n){return'<span class="wj-glyph-'+(n.currentSort=="+"?"up":"down")+'"><\/span>'},i._WJA_COLLAPSE="wj-collapse",i}();t.CellFactory=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var i=function(){function t(t,i,r,u){typeof t=="undefined"&&(t=-1);typeof i=="undefined"&&(i=-1);typeof r=="undefined"&&(r=t);typeof u=="undefined"&&(u=i);this._row=n.asInt(t);this._col=n.asInt(i);this._row2=n.asInt(r);this._col2=n.asInt(u)}return Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){this._row=n.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},set:function(t){this._col=n.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row2",{get:function(){return this._row2},set:function(t){this._row2=n.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col2",{get:function(){return this._col2},set:function(t){this._col2=n.asInt(t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n.grid.CellRange(this._row,this._col,this._row2,this._col2)},Object.defineProperty(t.prototype,"rowSpan",{get:function(){return Math.abs(this._row2-this._row)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnSpan",{get:function(){return Math.abs(this._col2-this._col)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRow",{get:function(){return Math.min(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRow",{get:function(){return Math.max(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftCol",{get:function(){return Math.min(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightCol",{get:function(){return Math.max(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._row>-1&&this._col>-1&&this._row2>-1&&this._col2>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingleCell",{get:function(){return this._row==this._row2&&this._col==this._col2},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,i){var r=n.tryCast(t,n.grid.CellRange);if(r)return r.topRow>=this.topRow&&r.bottomRow<=this.bottomRow&&r.leftCol>=this.leftCol&&r.rightCol<=this.rightCol;if(n.isInt(t)&&n.isInt(i))return t>=this.topRow&&t<=this.bottomRow&&i>=this.leftCol&&i<=this.rightCol;throw"contains expects a CellRange or row/column indices.";},t.prototype.containsRow=function(t){return n.asInt(t),t>=this.topRow&&t<=this.bottomRow},t.prototype.containsColumn=function(t){return n.asInt(t),t>=this.leftCol&&t<=this.rightCol},t.prototype.intersects=function(n){return this.rightCol<n.leftCol||this.leftCol>n.rightCol||this.bottomRow<n.topRow||this.topRow>n.bottomRow?!1:!0},t.prototype.getRenderSize=function(t){for(var i,r=new n.Size(0,0),u=this.topRow;u<=this.bottomRow;u++)r.height+=t.rows[u].renderSize;for(i=this.leftCol;i<=this.rightCol;i++)r.width+=t.columns[i].renderSize;return r},t.prototype.equals=function(n){return n instanceof t&&this._row==n._row&&this._col==n._col&&this._row2==n._row2&&this._col2==n._col2},t}();t.CellRange=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){(function(t){"use strict";var f,i,r,e,o,u,s,h;(function(n){n[n.Visible=1]="Visible";n[n.AllowResizing=2]="AllowResizing";n[n.AllowDragging=4]="AllowDragging";n[n.AllowMerging=8]="AllowMerging";n[n.AllowSorting=16]="AllowSorting";n[n.AutoGenerated=32]="AutoGenerated";n[n.Collapsed=64]="Collapsed";n[n.ParentCollapsed=128]="ParentCollapsed";n[n.Selected=256]="Selected";n[n.ReadOnly=512]="ReadOnly";n[n.HtmlContent=1024]="HtmlContent";n[n.WordWrap=2048]="WordWrap";n[n.RowDefault=n.Visible|n.AllowResizing]="RowDefault";n[n.ColumnDefault=n.Visible|n.AllowDragging|n.AllowResizing|n.AllowSorting]="ColumnDefault"})(t.RowColFlags||(t.RowColFlags={}));f=t.RowColFlags;i=function(){function t(){this._list=null;this._pos=0;this._idx=-1}return Object.defineProperty(t.prototype,"visible",{get:function(){return this._getFlag(1)},set:function(n){this._setFlag(1,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._getFlag(1)&&!this._getFlag(128)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pos",{get:function(){return this._list&&this._list._update(),this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._list&&this._list._update(),this._idx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._sz},set:function(t){t!=this._sz&&(this._sz=n.asNumber(t,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderSize",{get:function(){if(!this.isVisible)return 0;var n=this._sz,t=this._list;return(n==null||n<0)&&t!=null?Math.round(t.defaultSize):(t!=null&&(t.minSize!=null&&n<t.minSize&&(n=t.minSize),t.maxSize!=null&&n>t.maxSize&&(n=t.maxSize)),this._szMin!=null&&n<this._szMin&&(n=this._szMin),this._szMax!=null&&n>this._szMax&&(n=this._szMax),Math.round(n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowResizing",{get:function(){return this._getFlag(2)},set:function(n){this._setFlag(2,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDragging",{get:function(){return this._getFlag(4)},set:function(n){this._setFlag(4,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMerging",{get:function(){return this._getFlag(8)},set:function(n){this._setFlag(8,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._getFlag(256)},set:function(n){this._setFlag(256,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._getFlag(512)},set:function(n){this._setFlag(512,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._getFlag(1024)},set:function(n){this.isContentHtml!=n&&(this._setFlag(1024,n),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._getFlag(2048)},set:function(n){this._setFlag(2048,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&(this._cssClass=n.asString(t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._list?this._list._g:null},enumerable:!0,configurable:!0}),t.prototype.onPropertyChanged=function(){this._list&&(this._list._dirty=!0,this.grid.invalidate())},t.prototype._getFlag=function(n){return(this._f&n)!=0},t.prototype._setFlag=function(n,t){return t!=this._getFlag(n)?(this._f=t?this._f|n:this._f&~n,this.onPropertyChanged(),!0):!1},t}();t.RowCol=i;r=function(i){function r(){i.call(this);this._f=f.ColumnDefault;this._hash=r._ctr.toString(36);r._ctr++}return __extends(r,i),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},set:function(n){this._name=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataType",{get:function(){return this._type},set:function(t){this._type!=t&&(this._type=n.asEnum(t,n.DataType),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"binding",{get:function(){return this._binding?this._binding.path:null},set:function(t){var r,i,u;t!=this.binding&&(r=n.asString(t),this._binding=r?new n._Binding(r):null,!this._type&&this.grid&&this._binding&&(i=this.grid.collectionView,i&&i.sourceCollection&&i.sourceCollection.length&&(u=i.sourceCollection[0],this._type=n.getType(this._binding.getValue(u)))),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._szStar!=null?this._szStar:this.size},set:function(t){r._parseStarSize(t)!=null?(this._szStar=t,this.onPropertyChanged()):(this._szStar=null,this.size=n.asNumber(t,!0))},enumerable:!0,configurable:!0}),r._parseStarSize=function(t){if(n.isString(t)&&t.length>0&&t[t.length-1]=="*"){var i=t.length==1?1:t.substr(0,t.length-1)*1;if(i>0&&!isNaN(i))return i}return null},Object.defineProperty(r.prototype,"minWidth",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=n.asNumber(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=n.asNumber(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"renderWidth",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(n){this._align!=n&&(this._align=n,this.onPropertyChanged())},enumerable:!0,configurable:!0}),r.prototype.getAlignment=function(){var n=this._align;if(n==null&&(n="",!this._map))switch(this._type){case 3:n="center";break;case 2:n="right"}return n},Object.defineProperty(r.prototype,"header",{get:function(){return this._hdr?this._hdr:this.binding},set:function(n){this._hdr!=n&&(this._hdr=n,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataMap",{get:function(){return this._map},set:function(i){this._map!=i&&(this._map&&this._map.mapChanged.removeHandler(this.onPropertyChanged,this),this._map=n.asType(i,t.DataMap,!0),this._map&&this._map.mapChanged.addHandler(this.onPropertyChanged,this),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"format",{get:function(){return this._fmt},set:function(n){this._fmt!=n&&(this._fmt=n,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowSorting",{get:function(){return this._getFlag(16)},set:function(n){this._setFlag(16,n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentSort",{get:function(){var t,n;if(this.grid&&this.grid.collectionView&&this.grid.collectionView.canSort)for(t=this.grid.collectionView.sortDescriptions,n=0;n<t.length;n++)if(t[n].property==this.binding)return t[n].ascending?"+":"-";return null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"aggregate",{get:function(){return this._agg!=null?this._agg:0},set:function(t){t!=this._agg&&(this._agg=n.asEnum(t,n.Aggregate),this.onPropertyChanged())},enumerable:!0,configurable:!0}),r._ctr=0,r}(i);t.Column=r;e=function(n){function t(t){n.call(this);this._f=f.ColumnDefault;this._data=t}return __extends(t,n),Object.defineProperty(t.prototype,"dataItem",{get:function(){return this._data},set:function(n){this._data=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size},set:function(n){this.size=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),t}(i);t.Row=e;o=function(t){function i(){t.call(this);this._level=-1;this.isReadOnly=!0}return __extends(i,t),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(t){n.asInt(t);t!=this._level&&(this._level=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){var t=null,i=null;return this.grid!=null&&this._list!=null?(this._list._update(),this.index<this._list.length-1&&(t=this._list[this.index+1]),i=n.tryCast(t,n.grid.GroupRow),t&&(i==null||i.level>this.level)):!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCollapsed",{get:function(){return this._getFlag(64)},set:function(t){n.asBoolean(t);t!=this.isCollapsed&&this._list!=null&&this._setCollapsed(t)},enumerable:!0,configurable:!0}),i.prototype._setCollapsed=function(t){var o=this,i=this.grid,u=i.rows,e=this.getCellRange(),f=new n.grid.CellRangeEventArgs(i.cells,new n.grid.CellRange(this.index,-1)),r;i.onGroupCollapsedChanging(f);if(!f.cancel){i.deferUpdate(function(){o._setFlag(64,t);for(var i=e.topRow+1;i<=e.bottomRow&&i>-1&&i<u.length;i++)u[i]._setFlag(128,t),r=n.tryCast(u[i],n.grid.GroupRow),r!=null&&r.isCollapsed&&(i=r.getCellRange().bottomRow)});i.onGroupCollapsedChanged(f)}},i.prototype.getCellRange=function(){for(var r,u=this._list,f=this.index,i=u.length-1,t=f+1;t<=i;t++)if(r=n.tryCast(u[t],n.grid.GroupRow),r!=null&&r.level<=this.level){i=t-1;break}return new n.grid.CellRange(f,0,i,this.grid.columns.length-1)},i}(e);t.GroupRow=o;u=function(t){function i(i,r){t.call(this);this._szDef=25;this._szBase=25;this._szTot=0;this._dirty=!1;this._g=n.asType(i,n.grid.FlexGrid);this._szDef=n.asNumber(r,!1,!0);this._szBase=this._szDef}return __extends(i,t),Object.defineProperty(i.prototype,"defaultSize",{get:function(){return this._szDef},set:function(t){this._szDef!=t&&(this._szDef=n.asNumber(t,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minSize",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=n.asNumber(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxSize",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=n.asNumber(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),i.prototype.getTotalSize=function(){return this._update(),this._szTot},i.prototype.getItemAt=function(n){if(this._update(),n<=0&&this.length>0)return 0;for(var u=0,i=this.length-1,t,r;u<=i;)if(t=u+i>>>1,r=this[t],r._pos>n)i=t-1;else if(r._pos+r.renderSize<n)u=t+1;else return t;return i},i.prototype.getNextCell=function(n,t,i){var r,u;switch(t){case 1:for(r=n+1;r<this.length;r++)if(this[r].renderSize>0)return r;break;case 2:for(r=n-1;r>=0;r--)if(this[r].renderSize>0)return r;break;case 6:for(r=this.length-1;r>=0;r--)if(this[r].renderSize>0)return r;break;case 5:for(r=0;r<this.length;r++)if(this[r].renderSize>0)return r;break;case 3:return u=this.getItemAt(this[n].pos+i),u<0?this.getNextCell(n,6,i):u;case 4:return u=this.getItemAt(this[n].pos-i),u<0?this.getNextCell(n,5,i):u}return n},i.prototype.canMoveElement=function(n,t){var r,u,i;if(t==n||t==n+1||n<0||n>=this.length||t>=this.length)return!1;for(t<0&&(t=this.length-1),r=Math.min(n,t),u=Math.max(n,t),i=r;i<=u;i++)if(!this[i].allowDragging)return!1;return!0},i.prototype.moveElement=function(n,t){if(this.canMoveElement(n,t)){var i=this[n];this.removeAt(n);t<0&&(t=this.length);this.insert(t,i)}},i.prototype.onCollectionChanged=function(i){typeof i=="undefined"&&(i=n.collections.NotifyCollectionChangedEventArgs.reset);i.action==0&&(i.item._list=this);this._dirty=!0;this._g.invalidate();t.prototype.onCollectionChanged.call(this,i)},i.prototype.clear=function(){for(var n=0;n<this.length;n++)this[n]._list=null;t.prototype.clear.call(this)},i.prototype._update=function(){var i,n,t;if(this._dirty&&!this._g.isUpdating){for(this._dirty=!1,i=0,t=0;t<this.length;t++)n=this[t],n._idx=t,n._list=this,n._pos=i,i+=n.renderSize;return this._szTot=i,!0}return!1},i}(n.collections.ObservableArray);t.RowColCollection=u;s=function(n){function t(){n.apply(this,arguments);this._firstVisible=-1}return __extends(t,n),t.prototype.getColumn=function(n){var t=this.indexOf(n);return t>-1?this[t]:null},t.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return t;for(t=0;t<this.length;t++)if(this[t].binding==n)return t;return-1},Object.defineProperty(t.prototype,"firstVisibleIndex",{get:function(){return this._update(),this._firstVisible},enumerable:!0,configurable:!0}),t.prototype._update=function(){if(n.prototype._update.call(this)){this._firstVisible=-1;for(var t=0;t<this.length;t++)if(this[t].visible){this._firstVisible=t;break}return!0}return!1},t.prototype._updateStarSizes=function(n){for(var e=0,t,u,f,i=0;i<this.length;i++)t=this[i],t.isVisible&&(t._szStar?(e+=r._parseStarSize(t._szStar),u=t):n-=t.renderWidth);if(u!=null){for(f=n,i=0;i<this.length;i++)t=this[i],t.isVisible&&t._szStar&&(t==u?t._sz=f:(t._sz=Math.max(0,Math.round(r._parseStarSize(t._szStar)/e*n)),f-=t.renderWidth));return this._dirty=!0,this._update(),!0}return!1},t}(u);t.ColumnCollection=s;h=function(t){function i(){t.apply(this,arguments);this._maxLevel=-1}return __extends(i,t),Object.defineProperty(i.prototype,"maxGroupLevel",{get:function(){return this._update(),this._maxLevel},enumerable:!0,configurable:!0}),i.prototype._update=function(){var i,r;if(t.prototype._update.call(this)){for(this._maxLevel=-1,i=0;i<this.length;i++)r=n.tryCast(this[i],n.grid.GroupRow),r&&r.level>this._maxLevel&&(this._maxLevel=r.level);return!0}return!1},i}(u);t.RowCollection=h})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var i=function(){function t(t,i){var e,o;if(this._row=-1,this._col=-1,this._edge=0,this._EDGESIZE=5,t instanceof n.grid.FlexGrid)this._g=t;else if(t instanceof n.grid.GridPanel)this._p=t,t=this._g=this._p.grid;else throw"First parameter should be a FlexGrid or GridPanel.";if(n.isNumber(i.pageX)&&n.isNumber(i.pageY))i=new n.Point(i.pageX,i.pageY);else if(!(i instanceof n.Point))throw"Second parameter should be a MouseEvent or wijmo.Point.";this._pt=i.clone();var s=t.controlRect,h=t.topLeftCells,c=t.headersVisibility,r=c&2?h.columns.getTotalSize():0,u=c&1?h.rows.getTotalSize():0,f=t.scrollPosition;if(i.x-=s.left,i.y-=s.top,this._g._rtl&&(i.x=s.width-i.x),this._p==null&&i.x>=0&&i.y>=0&&t.clientSize&&i.x<=t.clientSize.width+r&&i.y<=t.clientSize.height+u&&(this._p=i.x<=r&&i.y<=u?t.topLeftCells:i.x<=r?t.rowHeaders:i.y<=u?t.columnHeaders:t.cells),this._p!=null){switch(this._p.cellType){case 3:i.y=i.y-u-f.y+this._p._getOffsetY();break;case 2:i.x=i.x-r-f.x;break;case 1:i.x=i.x-r-f.x;i.y=i.y-u-f.y+this._p._getOffsetY()}this._row=i.y>this._p.rows.getTotalSize()?-1:this._p.rows.getItemAt(i.y);this._col=i.x>this._p.columns.getTotalSize()?-1:this._p.columns.getItemAt(i.x);this._edge=0;this._col>-1&&(e=this._p.columns[this._col],i.x-e.pos-i.x<=this._EDGESIZE&&(this._edge|=1),e.pos+e.renderSize-i.x<=this._EDGESIZE&&(this._edge|=4));this._row>-1&&(o=this._p.rows[this._row],i.y-o.pos-i.y<=this._EDGESIZE&&(this._edge|=2),o.pos+o.renderSize-i.y<=this._EDGESIZE&&(this._edge|=8))}}return Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellType",{get:function(){return this._p?this._p.cellType:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridPanel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellRange",{get:function(){return new n.grid.CellRange(this._row,this._col)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeLeft",{get:function(){return(this._edge&1)!=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeTop",{get:function(){return(this._edge&2)!=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeRight",{get:function(){return(this._edge&4)!=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeBottom",{get:function(){return(this._edge&8)!=0},enumerable:!0,configurable:!0}),t}();t.HitTestInfo=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";(function(n){n[n.None=0]="None";n[n.Cells=1]="Cells";n[n.ColumnHeaders=2]="ColumnHeaders";n[n.RowHeaders=4]="RowHeaders";n[n.AllHeaders=n.ColumnHeaders|n.RowHeaders]="AllHeaders";n[n.All=n.Cells|n.AllHeaders]="All"})(t.AllowMerging||(t.AllowMerging={}));var i=t.AllowMerging,r=function(){function t(n){this._g=n}return t.prototype.getMergedRange=function(t,r,u){var f,s,v=t.columns,y=t.rows,d=y[r],g=v[u],o,p,w,h,c,b,k,e,l,a;if(d instanceof n.grid.GroupRow&&d.dataItem instanceof n.collections.CollectionViewGroup&&(f=new n.grid.CellRange(r,u),g.aggregate==0)){while(f.col>0&&v[f.col-1].aggregate==0)f.col--;while(f.col2<v.length-1&&v[f.col2+1].aggregate==0)f.col2++;return f}o=!1;switch(this._g.allowMerging){case 0:o=!0;break;case 1:o=t.cellType!=1;break;case 2:o=t.cellType!=2&&t.cellType!=4;break;case 4:o=t.cellType!=3&&t.cellType!=4;break;case i.AllHeaders:o=t.cellType==1}if(o)return null;if(t.columns[u].allowMerging){for(f=new n.grid.CellRange(r,u),p=0,w=t.rows.length-1,(t.cellType==1||t.cellType==3)&&(s=t._getViewRange(!0),p=s.topRow,w=s.bottomRow),e=t.getCellData(r,u,!0),h=r-1;e!=null&&h>=p;h--){if(y[h]instanceof n.grid.GroupRow||t.getCellData(h,u,!0)!==e)break;f.row=h}for(c=r+1;e!=null&&c<=w;c++){if(y[c]instanceof n.grid.GroupRow||t.getCellData(c,u,!0)!==e)break;f.row2=c}if(!f.isSingleCell)return f}if(t.rows[r].allowMerging){for(f=new n.grid.CellRange(r,u),b=0,k=t.columns.length-1,(t.cellType==1||t.cellType==2)&&(s=t._getViewRange(!0),b=s.leftCol,k=s.rightCol),e=t.getCellData(r,u,!0),l=u-1;l>=b;l--){if(t.getCellData(r,l,!0)!==e)break;f.col=l}for(a=u+1;a<=k;a++){if(t.getCellData(r,a,!0)!==e)break;f.col2=a}if(!f.isSingleCell)return f}return null},t}();t.MergeManager=r})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var i=function(){function t(t,i,r){var f,u;if(this.mapChanged=new n.Event,n.isArray(t)&&!i&&!r){for(f=[],u=0;u<t.length;u++)f.push({key:u,value:t[u]});t=f;i="key";r="value"}this._cv=n.asCollectionView(t);this._keyPath=n.asString(i,!1);this._displayPath=n.asString(r,!1);this._cv.collectionChanged.addHandler(this.onMapChanged,this)}return t.prototype.getKeyValue=function(n){var t=this._indexOf(n,this._displayPath,!1);return t>-1?this._cv.sourceCollection[t][this._keyPath]:n},t.prototype.getDisplayValue=function(n){var t=this._indexOf(n,this._keyPath,!0);return t>-1?this._cv.sourceCollection[t][this._displayPath]:n},t.prototype.getDisplayValues=function(){var i=[],t,n;if(this._cv&&this._displayPath)for(t=this._cv.sourceCollection,n=0;n<t.length;n++)i.push(t[n][this._displayPath]);return i},t.prototype.onMapChanged=function(){this.mapChanged.raise(this)},t.prototype._indexOf=function(n,t,i){var f,r,u;if(this._cv&&t)for(i||(n=n.toString().toLowerCase()),f=this._cv.sourceCollection,r=0;r<f.length;r++)if((u=f[r][t],u==n)||!i&&u.length==n.length&&u.toLowerCase()==n)return r;return-1},t}();t.DataMap=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var r,u,f,i;(function(n){n[n.None=0]="None";n[n.Cell=1]="Cell";n[n.CellRange=2]="CellRange";n[n.Row=3]="Row";n[n.RowRange=4]="RowRange";n[n.ListBox=5]="ListBox"})(t.SelectionMode||(t.SelectionMode={}));r=t.SelectionMode,function(n){n[n.None=0]="None";n[n.Selected=1]="Selected";n[n.Cursor=2]="Cursor"}(t.SelectedState||(t.SelectedState={}));u=t.SelectedState,function(n){n[n.None=0]="None";n[n.Next=1]="Next";n[n.Prev=2]="Prev";n[n.NextPage=3]="NextPage";n[n.PrevPage=4]="PrevPage";n[n.Home=5]="Home";n[n.End=6]="End";n[n.NextCell=7]="NextCell";n[n.PrevCell=8]="PrevCell"}(t.SelMove||(t.SelMove={}));f=t.SelMove;i=function(){function t(t){this._sel=new n.grid.CellRange(0,0);this._mode=2;this._g=t}return Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._mode},set:function(n){var i,t;if(n!=this._mode){if(n==5||this._mode==5)for(i=this._g.rows,t=0;t<i.length;t++)i[t].isSelected=n==5?this._sel.containsRow(t):!1;this._mode=n;this._g.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._sel},set:function(n){this.select(n)},enumerable:!0,configurable:!0}),t.prototype.getSelectedState=function(n,t){if(this._mode==0)return 0;var i=this._sel,r=this._g,u=r.getMergedRange(r.cells,n,t);if(u){if(u.contains(i.row,i.col))return 2;if(u.intersects(i))return 1}return i.row==n&&i.col==t?2:r.rows[n].isSelected||r.columns[t].isSelected?1:(i=this._adjustSelection(i),n<0&&i.containsColumn(t)||t<0&&i.containsRow(n))?1:this._mode==5?0:i.containsRow(n)&&i.containsColumn(t)?1:0},t.prototype.select=function(t,i){var e,f,o,h;typeof i=="undefined"&&(i=!0);n.isNumber(t)&&n.isNumber(i)&&(t=new n.grid.CellRange(t,i),i=!0);t=n.asType(t,n.grid.CellRange);var u=this._g,s=this._sel,r=t;switch(u.selectionMode){case 1:t.row2=t.row;t.col2=t.col;break;case 3:t.row2=t.row;break;case 5:for(e=u.rows,f=0;f<e.length;f++)e[f].isSelected=r.containsRow(f)}if(r.equals(s)){i&&u.scrollIntoView(r.row,r.col);return}if(o=new n.grid.CellRangeEventArgs(u.cells,r),u.onSelectionChanging(o)){r.row=Math.min(r.row,u.rows.length-1);r.row2=Math.min(r.row2,u.rows.length-1);this._sel=r;u.refreshCells(!1,!0,[this._adjustSelection(s),this._adjustSelection(r)]);i&&u.scrollIntoView(r.row,r.col);u.collectionView&&(h=u._getCvIndex(r.row),u.collectionView.moveCurrentToPosition(h));u.onSelectionChanged(o)}},t.prototype.moveSelection=function(t,i,r){var f,u,s=this._g,c=s.rows,h=s.columns,e=this._getReferenceCell(t,i,r),o=Math.max(0,s.clientSize.height-s.columnHeaders.height),l;i==7?(u=h.getNextCell(e.col,1,o),f=e.row,u==e.col&&(f=c.getNextCell(f,1,o),f>e.row&&(u=h.getNextCell(0,1,o),u=h.getNextCell(u,2,o))),s.select(f,u)):i==8?(u=h.getNextCell(e.col,2,o),f=e.row,u==e.col&&(f=c.getNextCell(f,2,o),f<e.row&&(u=h.getNextCell(h.length-1,2,o),u=h.getNextCell(u,1,o))),s.select(f,u)):(f=c.getNextCell(e.row,t,o),u=h.getNextCell(e.col,i,o),r?(l=s.selection,s.select(new n.grid.CellRange(f,u,l.row2,l.col2))):s.select(f,u))},t.prototype._getReferenceCell=function(n,t){var u=this._g,r=u.selection,i=r;if(u.mergeManager&&(i=u.mergeManager.getMergedRange(u.cells,r.row,r.col)),!u.mergeManager||!i||i.isSingleCell)return r;switch(n){case 1:case 7:i.row=i.bottomRow;break;case 0:i.row=r.row}switch(t){case 1:case 7:i.col=i.rightCol;break;case 0:i.col=r.col}return i},t.prototype._adjustSelection=function(t){switch(this._mode){case 1:return new n.grid.CellRange(t.row,t.col,t.row,t.col);case 3:return new n.grid.CellRange(t.row,0,t.row,this._g.columns.length-1);case 4:case 5:return new n.grid.CellRange(t.row,0,t.row2,this._g.columns.length-1)}return t},t}();t._SelectionHandler=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var i=function(){function i(n){this._g=n;var t=n.hostElement;t.addEventListener("keypress",this._keyPress.bind(this));t.addEventListener("keydown",this._keyDown.bind(this))}return i.prototype._keyDown=function(t){var i=this._g,e=i.selection,s=t.ctrlKey,r=t.shiftKey,o=!0;if(i.isRangeValid(e)&&!t.defaultPrevented){if(i.activeEditor&&i._edtHdl._keyDown(t))return;var f=n.tryCast(i.rows[e.row],n.grid.GroupRow),u=n.tryCast(i.collectionView,"IEditableCollectionView"),h=t.keyCode;if(i._rtl)switch(h){case 37:h=39;break;case 39:h=37}switch(h){case 37:e.isValid&&e.col==0&&f!=null&&!f.isCollapsed&&f.hasChildren?f.isCollapsed=!0:this._moveSel(0,s?5:2,r);break;case 39:e.isValid&&e.col==0&&f!=null&&f.isCollapsed?f.isCollapsed=!1:this._moveSel(0,s?6:1,r);break;case 38:this._moveSel(s?5:2,0,r);break;case 40:this._moveSel(s?6:1,0,r);break;case 33:this._moveSel(4,0,r);break;case 34:this._moveSel(3,0,r);break;case 36:this._moveSel(0,5,r);break;case 35:this._moveSel(0,6,r);break;case 9:this._moveSel(0,r?8:7,r);break;case 13:this._moveSel(1,0,r);u&&u.currentEditItem!=null&&u.commitEdit();break;case 27:u&&(u.currentEditItem!=null&&u.cancelEdit(),u.currentAddItem!=null&&u.cancelNew());break;case 46:o=this._deleteSel();break;case 113:o=i.startEditing(!0);break;case 32:o=i.startEditing(!0);o&&setTimeout(function(){var n=i.activeEditor,t;n&&(n.type=="checkbox"?(n.checked=!n.checked,i.finishEditing()):(t=n.value.length,n.setSelectionRange(t,t)))},0);break;default:o=!1}o&&(t.preventDefault(),t.stopPropagation())}},i.prototype._keyPress=function(n){var t=this._g;t.activeEditor?t._edtHdl._keyPress(n):n.charCode>32&&t.startEditing(!1)&&setTimeout(function(){var i=t.activeEditor;i&&i.type!="checkbox"&&(i.value=String.fromCharCode(n.charCode),i.setSelectionRange(1,1),t._edtHdl._keyPress(n))},0)},i.prototype._moveSel=function(n,t,i){this._g.selectionMode!=0&&this._g._selHdl.moveSelection(n,t,i)},i.prototype._deleteSel=function(){var r=this._g,s=n.tryCast(r.collectionView,"IEditableCollectionView"),u=r.selection,e=r.rows,f=[],o,h,i,c;if(s!=null&&s.canRemove&&r.allowDelete&&!r.isReadOnly){switch(r.selectionMode){case 2:if(u.leftCol==0&&u.rightCol==r.columns.length-1)for(i=u.topRow;i>-1&&i<=u.bottomRow;i++)f.push(e[i]);break;case 5:for(i=0;i<e.length;i++)e[i].selected&&f.push(e[i]);break;case 3:u.topRow>-1&&f.push(e[u.topRow]);break;case 4:for(i=u.topRow;i>-1&&i<=u.bottomRow;i++)f.push(e[i])}for(o=new t.CellRange,h=new t.CellRangeEventArgs(r.cells,o),i=f.length-1;i>=0;i--)if(c=f[i].dataItem,c!=null){o.row=o.row2=i;r.onDeletingRow(h);h.cancel||s.remove(c)}}return f.length>0},i}();t._KeyboardHandler=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var r,u,i;(function(n){n[n.None=0]="None";n[n.Columns=1]="Columns";n[n.Rows=2]="Rows";n[n.Both=n.Rows|n.Columns]="Both"})(t.AllowResizing||(t.AllowResizing={}));r=t.AllowResizing,function(n){n[n.None=0]="None";n[n.Columns=1]="Columns";n[n.Rows=2]="Rows";n[n.Both=n.Rows|n.Columns]="Both"}(t.AllowDragging||(t.AllowDragging={}));u=t.AllowDragging;i=function(){function t(n){var t,i,r,u;this._g=n;t=n.hostElement;i=this;t.addEventListener("mousedown",function(n){document.addEventListener("mousemove",r);document.addEventListener("mouseup",u);i._mouseDown(n)});r=function(n){i._mouseMove(n)};u=function(n){document.removeEventListener("mousemove",r);document.removeEventListener("mouseup",u);i._mouseUp(n)};t.addEventListener("mousemove",this._hover.bind(this));t.addEventListener("dblclick",this._dblClick.bind(this));t.addEventListener("dragstart",this._dragStart.bind(this));t.addEventListener("dragover",this._dragOver.bind(this));t.addEventListener("drop",this._drop.bind(this));t.addEventListener("dragend",this._dragEnd.bind(this))}return t.prototype.resetMouseState=function(){this._dragSource&&(this._dragSource.style.opacity=1);this._htDown=null;this._lbSelRows=null;this._szRowCol=null;this._szArgs=null;this._dragSource=null;this._g.hostElement.style.cursor="default"},t.prototype._mouseDown=function(t){var i=this._g,r=i.hitTest(t),u,f;if((!i.editRange||!i.editRange.contains(r.cellRange))&&r.cellType!=0){if(this._htDown=r,this._eMouse=t,i.containsFocus()||i.focus(),this._szRowCol!=null){this._handleResizing(t);return}r.cellType==1&&r.col==i.columns.firstVisibleIndex&&(u=n.tryCast(i.rows[r.row],n.grid.GroupRow),u&&(f=document.elementFromPoint(t.clientX,t.clientY),this._hasAttribute(f,n.grid.CellFactory._WJA_COLLAPSE)&&(t.ctrlKey?i.collapseGroupsToLevel(u.isCollapsed?u.level+1:u.level):u.isCollapsed=!u.isCollapsed)));switch(r.cellType){case 1:t.ctrlKey&&i.selectionMode==5&&this._startListBoxSelection(r.row);this._mouseSelect(t,t.shiftKey);break;case 3:(this._g.allowDragging&2)==0&&(t.ctrlKey&&i.selectionMode==5&&this._startListBoxSelection(r.row),this._mouseSelect(t,t.shiftKey))}}},t.prototype._hasAttribute=function(n,t){for(;n;n=n.parentNode)if(n.getAttribute!=null&&n.getAttribute(t)!=null)return!0;return!1},t.prototype._mouseMove=function(n){if(this._htDown!=null)if(this._eMouse=n,this._szRowCol)this._handleResizing(n);else switch(this._htDown.cellType){case 1:this._mouseSelect(n,!0);break;case 3:(this._g.allowDragging&2)==0&&this._mouseSelect(n,!0)}},t.prototype._mouseUp=function(n){this._szArgs?this._finishResizing():this._handleSort(n);this.resetMouseState()},t.prototype._dblClick=function(t){var i=this._g,r=i.hitTest(t),s=i.selection,f=r.cellRange,u,e,o;if(r.edgeRight&&i.allowResizing&1){if(r.cellType==2){for(t.ctrlKey&&s.containsColumn(r.col)&&(f=s),e=f.leftCol;e<=f.rightCol;e++)if(i.columns[e].allowResizing&&(u=new n.grid.CellRangeEventArgs(i.cells,new n.grid.CellRange(-1,e)),i.onResizingColumn(u))){i.autoSizeColumn(e);i.onResizedColumn(u)}}else if(r.cellType==4&&i.topLeftCells.columns[r.col].allowResizing&&(u=new n.grid.CellRangeEventArgs(i.topLeftCells,new n.grid.CellRange(-1,r.col)),i.onResizingColumn(u))){i.autoSizeColumn(r.col,!0);i.onResizedColumn(u)}return}if(r.edgeBottom&&i.allowResizing&2)if(r.cellType==3){for(t.ctrlKey&&s.containsRow(r.row)&&(f=s),o=f.topRow;o<=f.bottomRow;o++)if(i.rows[o].allowResizing&&(u=new n.grid.CellRangeEventArgs(i.cells,new n.grid.CellRange(o,-1)),i.onResizingRow(u))){i.autoSizeRow(o);i.onResizedRow(u)}}else if(r.cellType==4&&i.topLeftCells.rows[r.row].allowResizing&&(u=new n.grid.CellRangeEventArgs(i.topLeftCells,new n.grid.CellRange(r.row,-1)),i.onResizingRow(u))){i.autoSizeRow(r.row,!0);i.onResizedRow(u)}r.cellType==1&&i.startEditing(!0,r.row,r.col)},t.prototype._hover=function(t){if(this._htDown==null){var r=this._g,i=r.hitTest(t),u=i.gridPanel,f="default";this._szRowCol=null;(i.cellType==2||i.cellType==4)&&r.allowResizing&1&&i.edgeRight&&u.columns[i.col].allowResizing&&(this._szRowCol=u.columns[i.col]);(i.cellType==3||i.cellType==4)&&r.allowResizing&2&&i.edgeBottom&&u.rows[i.row].allowResizing&&(this._szRowCol=u.rows[i.row]);this._szRowCol instanceof n.grid.Column?f="e-resize":this._szRowCol instanceof n.grid.Row&&(f="s-resize");this._szStart=this._szRowCol?this._szRowCol.renderSize:0;r.hostElement.style.cursor=f}},t.prototype._mouseSelect=function(t,i){var f,r,u;this._htDown&&this._htDown.gridPanel&&this._g.selectionMode!=0&&(f=this._g,r=new n.grid.HitTestInfo(this._htDown.gridPanel,t),t.preventDefault(),this._handleSelection(r,i),r=new n.grid.HitTestInfo(f,t),r.cellType!=1&&r.cellType!=3&&(u=this,setTimeout(function(){u._mouseSelect(u._eMouse,i)},0)))},t.prototype._handleResizing=function(t){var i;if(t.preventDefault(),this._szRowCol instanceof n.grid.Column&&(i=Math.max(1,this._szStart+(t.pageX-this._htDown.point.x)*(this._g._rtl?-1:1)),this._szRowCol.renderSize!=i)){this._szArgs==null&&(this._szArgs=new n.grid.CellRangeEventArgs(this._htDown.gridPanel,new n.grid.CellRange(-1,this._szRowCol.index)));this._g.onResizingColumn(this._szArgs);this._szRowCol.width=i}if(this._szRowCol instanceof n.grid.Row&&(i=Math.max(1,this._szStart+(t.pageY-this._htDown.point.y)),this._szRowCol.renderSize!=i)){this._szArgs==null&&(this._szArgs=new n.grid.CellRangeEventArgs(this._htDown.gridPanel,new n.grid.CellRange(this._szRowCol.index,-1)));this._g.onResizingRow(this._szArgs);this._szRowCol.height=i}},t.prototype._dragStart=function(t){var r=this._g,i=this._htDown,u;i&&(this._dragSource=null,this._szRowCol||(u=new n.grid.CellRangeEventArgs(r.cells,i.cellRange),i.cellType==2&&r.allowDragging&1&&i.col>-1&&r.columns[i.col].allowDragging?r.onDraggingColumn(u)&&(this._dragSource=t.target):i.cellType==3&&r.allowDragging&2&&i.row>-1&&r.rows[i.row].allowDragging&&r.onDraggingRow(u)&&(this._dragSource=t.target)),this._dragSource&&t.dataTransfer?(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",""),this._dragSource.style.opacity=.5):t.preventDefault())},t.prototype._dragEnd=function(){this.resetMouseState()},t.prototype._dragOver=function(n){var i=this._g,t=i.hitTest(n),r=!1;this._htDown&&t.cellType==this._htDown.cellType&&(t.cellType==2?r=i.columns.canMoveElement(this._htDown.col,t.col):t.cellType==3&&(r=i.rows.canMoveElement(this._htDown.row,t.row)));r&&(n.dataTransfer.dropEffect="move",n.preventDefault())},t.prototype._drop=function(t){var i=this._g,r=i.hitTest(t),f=new n.grid.CellRangeEventArgs(i.cells,r.cellRange),u;if(this._htDown&&r.cellType==this._htDown.cellType)if(u=i.selection,r.cellType==2){i.columns.moveElement(this._htDown.col,r.col);i.select(u.row,r.col);i.onDraggedColumn(f)}else if(r.cellType==3){i.rows.moveElement(this._htDown.row,r.row);i.select(r.row,u.col);i.onDraggedRow(f)}this.resetMouseState()},t.prototype._finishResizing=function(){var i=this._g,e=i.selection,o=this._eMouse.ctrlKey,t=this._szArgs,r,u,f;if(t&&t.row>-1){i.onResizedRow(t);if(r=t.row,o&&this._htDown.cellType!=4&&e.containsRow(r))for(u=e.topRow;u<=e.bottomRow;u++)if(i.rows[u].allowResizing&&u!=r){t=new n.grid.CellRangeEventArgs(i.cells,new n.grid.CellRange(u,-1));i.onResizingRow(t);if(!t.cancel){i.rows[u].size=i.rows[r].size;i.onResizedRow(t)}}}if(t&&t.col>-1){i.onResizedColumn(t);if(r=t.col,o&&this._htDown.cellType!=4&&e.containsColumn(r))for(f=e.leftCol;f<=e.rightCol;f++)if(i.columns[f].allowResizing&&f!=r){t=new n.grid.CellRangeEventArgs(i.cells,new n.grid.CellRange(-1,f));i.onResizingColumn(t);if(!t.cancel){i.columns[f].size=i.columns[r].size;i.onResizedColumn(t)}}}},t.prototype._startListBoxSelection=function(n){var i=this._g.rows,t;for(this._lbSelState=!i[n].isSelected,this._lbSelRows={},t=0;t<i.length;t++)i[t].isSelected&&(this._lbSelRows[t]=!0)},t.prototype._handleSelection=function(t,i){var e=this,u=this._g,s=u.rows,o=u.selection,f=new n.grid.CellRange(t.row,t.col),h,c,r;if(t.row>-1&&t.col>-1)if(this._lbSelRows!=null){for(f=new n.grid.CellRange(t.row,t.col,e._htDown.row,e._htDown.col),r=0;r<s.length;r++)if(h=f.containsRow(r)?e._lbSelState:e._lbSelRows[r]!=null,h!=s[r].isSelected&&(c=new n.grid.CellRangeEventArgs(u.cells,new n.grid.CellRange(r,o.col,r,o.col2)),u.onSelectionChanging(c))){s[r].isSelected=h;u.onSelectionChanged(c)}u.scrollIntoView(t.row,t.col)}else t.cellType==3&&(f.col=0,f.col2=u.columns.length-1),i&&(f.row2=o.row2,f.col2=o.col2),u.select(f)},t.prototype._handleSort=function(t){var r=this._g,e=r.collectionView,i=r.hitTest(t),o,f;if(this._htDown&&i.cellType==this._htDown.cellType&&i.col==this._htDown.col&&i.cellType==2&&!i.edgeRight&&i.row==this._g.columnHeaders.rows.length-1&&i.col>-1&&e&&e.canSort&&r.allowSorting){var u=r.columns[i.col],s=u.currentSort,h=s!="+";if(u.allowSorting&&u.binding){if(!s&&t.ctrlKey)return;if(o=new n.grid.CellRangeEventArgs(r.columnHeaders,new n.grid.CellRange(-1,i.col)),r.onSortingColumn(o)){f=e.sortDescriptions;t.ctrlKey?f.clear():f.splice(0,f.length,new n.collections.SortDescription(u.binding,h));r.onSortedColumn(o)}}}},t}();t._MouseHandler=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={})),function(n){(function(t){"use strict";var i=function(){function t(t){this._fullEdit=!1;this._list=null;this._g=t;var i=this;t.selectionChanging.addHandler(function(n,r){i.finishEditing();r.row!=t.selection.row&&i._commitRowEdits()});t.hostElement.addEventListener("focusout",function(){setTimeout(function(){var n=t.activeEditor,r=document.activeElement;if(n&&n.type!="checkbox"&&r&&r.tagName=="BODY"){n.setSelectionRange(0,n.value.length);return}t.containsFocus()||i._commitRowEdits()},0)});t.scrollPositionChanged.addHandler(function(){i.finishEditing()});t.hostElement.addEventListener("mousedown",function(r){var e=t.selection,f=t.hitTest(r),u;i._htDown=null;f.cellType!=1?i._commitRowEdits():(u=n.tryCast(r.target,HTMLInputElement),u&&u.type=="checkbox"&&(u!=i.activeEditor?(r.preventDefault(),i.startEditing(!1,f.row,f.col),setTimeout(function(){u=i.activeEditor;u&&u.type=="checkbox"&&(u.checked=!u.checked,i.finishEditing())},0)):i.finishEditing()),u==null&&f.row==e.row&&f.col==e.col&&(i._htDown=f))},!0);t.hostElement.addEventListener("click",function(n){if(i._htDown&&!i.activeEditor){var r=t.hitTest(n);r.cellRange.equals(i._htDown.cellRange)&&i.startEditing(!0,r.row,r.col)}})}return t.prototype.startEditing=function(t,i,r){var u,f,o,s,c,h,e;if((typeof t=="undefined"&&(t=!0),u=this._g,i=n.asNumber(i,!0,!0),r=n.asNumber(r,!0,!0),i==null&&(i=u.selection.row),r==null&&(r=u.selection.col),!this._allowEditing(i,r))||(f=u.getMergedRange(u.cells,i,r),f||(f=new n.grid.CellRange(i,r)),u.select(f,!0),o=new n.grid.CellRangeEventArgs(u.cells,f),!u.onBeginningEdit(o)))return!1;if(s=n.tryCast(u.collectionView,"IEditableCollectionView"),s&&(c=u.rows[i].dataItem,s.editItem(c)),this._fullEdit=t,this._rng=f,this._list=null,h=u.columns[r].dataMap,h&&(this._list=h.getDisplayValues()),u.refresh(!1),e=u.activeEditor,e){e.type=="checkbox"?this._fullEdit=!1:e.setSelectionRange(0,e.value.length);u.onPrepareCellForEdit(o);setTimeout(function(){e.focus()},0)}return!0},t.prototype.finishEditing=function(t){var i,s,f,e;if(typeof t=="undefined"&&(t=!1),i=this._edt,!i)return!0;var r=this._g,u=this._rng,o=new n.grid.CellRangeEventArgs(r.cells,u);if(!r.onCellEditEnding(o))return!1;if(!t)for(s=i.type=="checkbox"?i.checked:i.value,f=u.topRow;f<=u.bottomRow;f++)for(e=u.leftCol;e<=u.rightCol;e++)r.cells.setCellData(f,e,s,!0);this._edt=null;this._rng=null;this._list=null;r.refresh(!1);r.onCellEditEnded(o);return!0},Object.defineProperty(t.prototype,"activeEditor",{get:function(){return this._edt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editRange",{get:function(){return this._rng},enumerable:!0,configurable:!0}),t.prototype._allowEditing=function(n,t){var i=this._g;return i.isReadOnly||i.selectionMode==0?!1:n<0||n>=i.rows.length||i.rows[n].isReadOnly?!1:t<0||t>=i.columns.length||i.columns[t].isReadOnly?!1:!0},t.prototype._commitRowEdits=function(){var t,i,r;if(this.finishEditing(),t=this._g,i=n.tryCast(t.collectionView,"IEditableCollectionView"),i&&i.currentEditItem){r=new n.grid.CellRangeEventArgs(t.cells,t.selection);t.onRowEditEnding(r);i.commitEdit();t.onRowEditEnded(r)}},t.prototype._keyDown=function(n){switch(n.keyCode){case 113:return this._fullEdit=!this._fullEdit,n.preventDefault(),!0;case 32:var t=this._edt;return t&&t.type=="checkbox"&&(t.checked=!t.checked,this.finishEditing(),n.preventDefault()),!0;case 13:case 9:return this.finishEditing(),!1;case 27:return this.finishEditing(!0),!0;case 38:case 40:case 37:case 39:case 33:case 34:case 36:case 35:if(!this._fullEdit)return this.finishEditing(),!1}return!0},t.prototype._keyPress=function(n){var t=this._edt,u,i,r;if(t&&t.type!="checkbox"&&this._list&&this._list.length>0)for(u=t.selectionStart,i=t.value,i=i.substr(0,u),n.target==t&&(u++,i+=String.fromCharCode(n.charCode)),i=i.toLowerCase(),r=0;r<this._list.length;r++)if(this._list[r].toLowerCase().indexOf(i)==0){t.value=this._list[r];t.setSelectionRange(u,this._list[r].length);n.preventDefault();break}},t}();t._EditHandler=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){(function(t){"use strict";var r=function(){function t(n){this._nrt=new i;this._g=n;n.beginningEdit.addHandler(this._beginningEdit,this);n.rowEditEnded.addHandler(this._rowEditEnded,this);n.loadedRows.addHandler(this.updateNewRowTemplate,this)}return t.prototype.updateNewRowTemplate=function(){var u=n.tryCast(this._g.collectionView,"IEditableCollectionView"),r=this._g,t=r.rows,f=u&&u.canAddNew&&r.allowAddNew&&!r.isReadOnly,i=t.indexOf(this._nrt);!f&&i>-1?t.removeAt(i):f&&(i<0?t.push(this._nrt):i!=t.length-1&&(t.removeAt(i),t.push(this._nrt)),this._nrt&&this._nrt._setFlag(128,!1))},t.prototype._beginningEdit=function(t,r){var f,u,e;if(!r.cancel&&(f=this._g.rows[r.row],n.tryCast(f,i)&&(u=n.tryCast(this._g.collectionView,"IEditableCollectionView"),u&&u.canAddNew))){e=u.isAddingNew?u.currentAddItem:u.addNew();u.moveCurrentTo(e);this.updateNewRowTemplate();this._g.onRowAdded(r);r.cancel&&u.cancelNew()}},t.prototype._rowEditEnded=function(){var t=n.tryCast(this._g.collectionView,"IEditableCollectionView");t&&t.isAddingNew&&t.commitNew()},t}(),i;t._AddNewHandler=r;i=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(t.Row);t._NewRowTemplate=i})(n.grid||(n.grid={}));var t=n.grid}(wijmo||(wijmo={}))
